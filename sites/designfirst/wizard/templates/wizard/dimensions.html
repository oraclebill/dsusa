{% extends "wizard/base.html" %}

{% block extra-head %}
{{block.super}}
<script>
	var standard_sizes = {{standard_sizes|safe}};

	function input_html(id, name, value) {
		return '<input type="text" name="'+name+'" id="'+id+'" value="'+value+'">'
	}

	function select_html(id, name, value) {
		var options = '<option></option>'
		for (var i=0; i<standard_sizes.length; i++) {
			var selected = ''
			if (value == standard_sizes[i])
				selected = ' selected="selected"'
			options += '<option value="'+standard_sizes[i]+'"'+selected+'> '+standard_sizes[i]+'&#148; </option>'
		}
		return '<select name="'+name+'" id="'+id+'">'+options+'</select>'
	}

	function replace_widget(id, name, standard) {
		var value = $('#'+id).val()
		if (standard)
			html = select_html(id, name, value)
		else
			html = input_html(id, name, value)
		$('#'+id).replaceWith(html)
	}

	function toggle_fields(standard) {
		replace_widget('id_wall_cabinet_height', 'wall_cabinet_height', standard)
		replace_widget('id_vanity_cabinet_height', 'vanity_cabinet_height', standard)
		replace_widget('id_depth', 'depth', standard)
		
		//Fixing navigation
		$('#id_depth').keydown(function(event){
			if (event.keyCode == KEY_TAB && !event.shiftKey) {
				wizard_go_to('_next_');
				return false;
			}
		})
	}
	
	$(function(){
		toggle_fields($('#id_standard_sizes').get(0).checked)
		
		$('#id_standard_sizes').change(function() {
			toggle_fields(this.checked)
		})
	})

</script>
{% endblock %}

{% block wizard-content %}

{% include "fieldsets_form.html" %}

{% endblock %}
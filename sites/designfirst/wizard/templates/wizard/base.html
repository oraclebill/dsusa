{% extends "base.html" %}

{% block title %}{{wizard.order}} | {{wizard.step_title}}{% endblock %}


{% block extra-head %}
	{{form.media}}
<script>

var IS_FIRST_STEP = {{wizard.is_first_step|lower}};
var KEY_TAB = 9;

function wizard_go_to(step) {
	$('#next_step').val(step)
	$('form#wizard_form').submit();
}

$(function(){
	$('#wizard_content :input:visible:first').keydown(function(event){
		if (event.keyCode == KEY_TAB && event.shiftKey) {
			if (!IS_FIRST_STEP)
				wizard_go_to('_prev_')
			return false;
		}
	}).focus()
	$('#wizard_content :input:visible:last').keydown(function(event){
		if (event.keyCode == KEY_TAB && !event.shiftKey) {
			wizard_go_to('_next_')
			return false;
		}
	})
	$('#wizard_steps a').click(function(){
		wizard_go_to($(this).attr('step'))
		return false;
	})
})
</script>
{% endblock %}


{% block content %}

<div id="wizard_steps" class="grid_16">
{% block wizard-steps%}
	{% for step in wizard.get_tabs %}
		<div{% if step.selected %} class="selected"{% endif %}>
			<a href="{{ step.url }}" step="{{step.slug}}"><img src="{{MEDIA_URL}}images/wizard/{{step.slug}}.png"></a>
			<br>
			{{step.title}}
		</div>
	{% endfor %}
{% endblock %}
</div>
<div class="clear"></div>



<form method="POST"{% if form.is_multipart %} enctype="multipart/form-data"{% endif %} id="wizard_form">
<input type="hidden" name="next_step_" id="next_step" value="_next_">
<div id="wizard_content" class="grid_11">
<fieldset>
	<legend>{{wizard.step_title}}</legend>
	{% block wizard-content %}
	{% endblock %}
</fieldset>
</div>


<div id="wizard_summary"  class="gird_5">
<fieldset>
	<legend>Order summary</legend>
	{% block wizard-summary%}
	Project Name: <strong>{{wizard.order}}</strong>
	
	<div style="height: 300px; overflow: auto;"">
	{% for section, values in wizard.get_summary %}
		<fieldset>
			<legend>{{section}}</legend>
		{% for name, value in values %}
			{{name}}: {{value}}<br>
		{% endfor %}
		</fieldset>
	{% endfor %}
	</div>	
	{% endblock %}
</fieldset>
</div>

<div class="clear"></div>

<div class="grid_13" style="text-align: center;">
<!-- <input type="submit" name="{{BTN_PREVIOUS}}" value="Previous"{% if wizard.is_first_step %} disabled="disabled"{%endif%}> -->
<input type="submit" name="{{BTN_SAVENEXT}}" value="Save/Next">
<!-- <input type="submit" name="{{BTN_SKIP}}" value="Skip"> -->
</div>

<div class="clear"></div>

</form>



{% endblock %}

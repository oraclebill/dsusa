{% extends "base.html" %}

{% block title %}
DesignFirst - Design Order 
{% endblock %}

{% block extrastyle %} 
<style type="text/css" media="screen">
	span.areastatus {
		float: right;
		font-style: italic;
		font-size: 0.8em;
	}
	span.invalid {
		color: red;
	}
</style>
{% endblock %}

{% block content %}

<!-- order and account information -->
<!-- order info -->
    <div class="grid_6 prefix_1 alpha">
    	<div id="order_info" class="box">
    		<h2>Order </h2> 
    		<table>
    			<tbody>
    				<tr><th>Project Name</th><td colspan=2>{{ order.description }}</td></tr>
					<tr><th>Order #</th><td colspan=2>{{ order.id }}</td></tr>
    				<tr><th>Status</th><td colspan=2>{{ order.get_status_display }} </td></tr>
    				<tr><th>Last Modified</th><td colspan=2>{{ order.updated }}</td></tr>
    			</tbody>
    		</table>
    	</div>
    </div>
    
<!--  account info -->
    <div class="grid_5 prefix_3 omega">
    	<div id="account_info" class="box ">
    		<h2>Account </h2>
    		<table>
    			<tbody>
    				<tr><th>Customer</th><td>{{ order.owner.first_name }} {{ order.owner.last_name }} ({{ order.owner }})</td></tr>
    				<tr><th>Account #</th><td>{{ order.owner.get_profile.account.id }}</td></tr>
                    {# <tr><th>Available Credit</th><td>{{order.owner.get_profile.account.dealerorganization.credit_balance}}</td></tr> #}
    				<tr><th>&nbsp;</th><td>&nbsp;</td></tr>
    				<tr><th>&nbsp;</th><td>&nbsp;</td></tr>
    			</tbody>
    		</table>
    	</div>
    </div>
    
<!-- design details, section by section -->
    <div class="grid_14 prefix_1 alpha">
		<!-- Design Request Data Entry Area -->
		<div id="order-entry" class="box">
			<h2>Design Request Info</h2>
			<div class="block">
				
				<div id="accordion">
					
					{% for subform in formlist %}
					<div class="block">
					    <h3>{{ subform.name }}</h3>
						<form action="#" method="POST" accept-charset="utf-8">
							<fieldset>
								<input type="hidden" name="subform" value="{{ subform.id }}">
								{{ subform.as_p }}
								<input type="submit" name="submit_{{subform.id}}" value="update">
							</fieldset>
						</form>
					</div>
					{% endfor %}
	
				</div>
			</div>

		</div>
    </div>

<!-- appliance info -->
    <div class="grid_14 prefix_1 alpha">
	    <div id="appliance_option_form" class="box">
			<h2>Appliances</h2>
			<form method="POST" action="">
			    {{ formset.management_form }}
			    {% for form in formset.forms %}
				<fieldset>
			        {{ form }}
				</fieldset>
			    {% endfor %}
	            <input type="submit" name="submit" value="add" />
			</form>		
	    </div>
    </div>

<!-- attachments and other stuff -->
    <div class="grid_14 prefix_1 alpha">
        <div id="template-display" class="box">
	        <h2>diagrams</h2>
			<p>Download your personalized floorplan template here
    			<a target="_blank" href=" {% url home.views.generate_floorplan_template order.id %}">
    			   <img src="{{MEDIA_URL}}/images/disk.png"></a>
			</p>
			<p>
			   Currently Attached File: [<span class="">{{order.client_diagram}}</span>]
			   Source: <span>{{order.}}</span>
			   <form action="." method="POST" enctype="multipart/form-data">
			      <fieldset>
  					 <input type="hidden" name="subform" value="{{ file_upload.id }}">
			         {{ file_upload }}
  					 <input type="submit" name="submit_{{subform.id}}" value="update">
			      </fieldset>
			   </form>
			</p>
        </div>
    </div>
	
	
	<div class="grid_3 alpha">
		<form action="{% url home.views.dealer_dashboard %}" method="get" accept-charset="utf-8">
			<p><input type="submit" value=" &larr; Back to Dashboard"></p>
		</form>
	</div>
	<div class="grid_3 prefix_10 omega">
		<form action="{% url home.views.dealer_submit_order order.id %}" method="get" accept-charset="utf-8">
			<p><input type="submit" value="Submit Design Request &rarr;"></p>
		</form>
	</div>
		
{% endblock %}

